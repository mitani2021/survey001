<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>第1回 学園世論調査</title>
</head>
<body>
  <h1>第1回 学園世論調査</h1>
  <form id="survey-form">
    <label>あなたの生徒番号：</label>
    <select id="student-id">
      <option value="">選択してください</option>
      <script>
        for (let i = 1; i <= 100; i++) {
          const val = String(i).padStart(3, '0');
          document.write(`<option value="${val}">${val}</option>`);
        }
      </script>
    </select>
    <br><br>

    <label>あなたが最も重要だと考える学園の課題：</label><br>
    <select id="issue">
      <option value="いじめが増加していること">いじめが増加していること</option>
      <option value="部活動の予算を拡充すること">部活動の予算を拡充すること</option>
      <option value="授業の質が低下していること">授業の質が低下していること</option>
      <option value="学園祭の来場者数が減少していること">学園祭の来場者数が減少していること</option>
      <option value="制服がダサいこと">制服がダサいこと</option>
      <option value="校則が厳しすぎること">校則が厳しすぎること</option>
      <option value="学生食堂の価格が高すぎること">学生食堂の価格が高すぎること</option>
    </select>
    <br><br>

    <label>あなたは、どの候補者を支持していますか？</label><br>
    <select id="candidate">
      <option value="神崎豪">神崎豪</option>
      <option value="風馬裕也">風馬裕也</option>
      <option value="田中和夫">田中和夫</option>
      <option value="姫島ノエル">姫島ノエル</option>
    </select>
    <br><br>

    <button type="submit">送信する</button>
  </form>

  <script>
    const scriptUrl = '<<https://script.google.com/macros/s/AKfycbwMoH3hnexzflvqExhNcNIj8vLECZ5K9gzViNxLc6hYyJ5I50mEE2zIZpW6WNGZF27l/exec>>';

    document.getElementById('survey-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const data = {
        student_id: document.getElementById('student-id').value,
        issue: document.getElementById('issue').value,
        candidate: document.getElementById('candidate').value
      };
      fetch(scriptUrl, {
        method: 'POST',
        body: JSON.stringify(data),
        headers: { 'Content-Type': 'application/json' }
      })
      .then(response => response.text())
      .then(result => alert("回答ありがとうございました！"))
      .catch(error => alert("送信に失敗しました"));
    });
  </script>
</body>
</html>
